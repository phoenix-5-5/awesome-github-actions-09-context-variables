name: contexts-example

on:
  push:
  pull_request:

jobs:
  use-contexts:
    runs-on: ubuntu-latest

    strategy:
      matrix:
        greeting: [Hello, Howdy, Hey]

    steps:
      - uses: actions/checkout@v2
      - name: Print greeting
        run: echo ${{ matrix.greeting }}
        env:
          GREETING: ${{ matrix.greeting }}
      - name: Setup node
        uses: actions/setup-node@v1
        with:
          node-version: 12

      - name: Set package version
        run: echo "::set-env name=PKG_VERSION::${{ env.MAIN_VER }}.${{ github.run_number }}.$(date +"%y%m%d")"


      - name: Publish package
        run: |
          sed -i 's/${PKG_VERSION}/${{ env.PKG_VERSION }}/g' package.json
          npm publish
        env:
          GITHUB_TOKEN: ${{secrets.GITHUB_TOKEN}}




